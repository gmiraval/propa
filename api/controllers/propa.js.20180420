'use strict';

module.exports = {
  Version: Version,
  Rain_Intensity:Rain_Intensity,
  Nwet:Nwet,
  Rain_height:Rain_height,
  TCC:TCC
};


var util = require('util');
var repl = require('repl');
var ffi = require('ffi');
var ref = require('ref');

var long = ref.types.long;
var double = ref.types.double;

function Version(req, res) {
var lib = ffi.Library('/usr/local/lib/propa64', {
  'version': [long, [] ]
});
var result = lib.version();
res.json(result);
}

function Rain_Intensity(req, res) {
var lib = ffi.Library('/usr/local/lib/propa64', {
  'rain_intensity': [double, [double,double,double] ]
});
var lat = req.swagger.params.lat.value;
var lon = req.swagger.params.lon.value;
var unav = req.swagger.params.unav.value;

var result = lib.rain_intensity(lat,lon,unav);
res.json(result);
}

function Nwet(req, res) {
var lib = ffi.Library('/usr/local/lib/propa64', {
  'NWET': [double, [double,double] ]
});
var lat = req.swagger.params.lat.value;
var lon = req.swagger.params.lon.value;

var result = lib.NWET(lat,lon);
res.json(result);
}

function Rain_height(req, res) {
var lib = ffi.Library('/usr/local/lib/propa64', {
  'rain_height': [double, [double,double] ]
});
var lat = req.swagger.params.lat.value;
var lon = req.swagger.params.lon.value;

var result = lib.rain_height(lat,lon);
res.json(result);
}

function TCC(req, res) {
var lib = ffi.Library('/usr/local/lib/propa64', {
  'LWCC': [double, [double,double,double] ]
});
var lat = req.swagger.params.lat.value;
var lon = req.swagger.params.lon.value;
var unav = req.swagger.params.unav.value;

var result = lib.LWCC(lat,lon,unav);
res.json(result);
}


